<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>EGSnrc C++ class library: Common input syntax for EGSnrc C++ applications</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<script language="JavaScript" type="text/javascript">
    $(document).ready(function(){
    var imgArr = new Array( // relative paths of images
    'linac2.png',
    'egs_isotropic_source.png',
    'egs_conestack.png',
    'car.png',
    'egs_cd_geometry.png',
    'chamber.png',
    'c_in_box.png',
    'egs_collimated_source.png',
    'egs_iplanes.png',
    'egs_point_source.png',
    'linac_s1.png',
    'egs_ndgeometry.png',
    'egs_roundrect_cylinders.png',
    'egs_source_collection.png',
    'egs_xyzrepeater.png',
    'cones.png',
    'egs_prism.png',
    'egs_pyramid.png',
    'I6702.png',
    'egs_xyzgeometry.png',
    'linac1.png'
    );
    var preloadArr = new Array();
    var i;
    /* preload images */
    for(i=0; i < imgArr.length; i++){
    preloadArr[i] = new Image();
    preloadArr[i].src = imgArr[i];
    }
    changeImg();
    var intID = setInterval(changeImg, 5000);
    /* image rotator */
    function changeImg(){
    $('#egsImageScroller').css('background','#000000 url(' + preloadArr[Math.floor(Math.random() * imgArr.length)].src +') center/contain no-repeat');
    }
    });
</script>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="egsImageScroller"></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EGSnrc C++ class library
   &#160;<span id="projectnumber">Report PIRS-898 (2017)</span>
   </div>
   <div id="projectbrief">Iwan Kawrakow, Ernesto Mainegra-Hing, Frederic Tessier, Reid Townson and Blake Walters</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Coding&#160;Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Common input syntax for EGSnrc C++ applications </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>
<a class="el" href="common.html#common_intro">Introduction</a>  </li>
<li>
<a class="el" href="common.html#common_geom_source_rco">Geometry, particle source and run control</a>  </li>
<li>
<a class="el" href="common.html#common_mc">Monte Carlo transport parameter control</a>  </li>
</ul>
<h1><a class="anchor" id="common_intro"></a>
Introduction</h1>
<p>All C++ applications distributed with EGSnrc use the same syntax for inputing information regarding geometry, source, run control and Monte Carlo transport parameters. Only the input blocks for scoring and variance reduction techniques vary between applications.</p>
<h1><a class="anchor" id="common_geom_source_rco"></a>
Geometry, particle source and run control</h1>
<p>Geometry and particle source are specified in an input file as explained in the <a class="el" href="group__Geometry.html">geometry module </a> and the <a class="el" href="group__Sources.html">particle sources module</a>. Run control is specified in a section of the input file delimited by </p>
<pre class="fragment">:start run control:
:stop run control:
</pre><p>A <a class="el" href="classEGS__RunControl.html">simple </a> run control object (RCO) is used to control a single run. A simple RCO understands the following inputs </p>
<pre class="fragment">ncase                       = number of histories to run
nbatch                      = number of batches to use (default is 10)
statistical accuracy sought = required uncertainty in %
max cpu hours allowed       = max. CPU time allowed
calculation                 = first or restart or combine or analyze
</pre><p> The only required input is the number of histories. The <b>nbatch</b> input determines how many times the simulation will report its progress (and not, as one might expect, the number of statistical batches as a history-by-history statistical analysis is used). With the <b><code> statistical accuracy sought </code></b> input one can make the calculation terminate when the specified uncertainty is reached for the cavity dose. Note, however, that after <b><code>ncase</b></code> histories the simulation does not continue <em>until</em> this uncertainty is obtained. With the <b><code>max cpu hours allowed</code></b> input one can limit the simulation time to some maximum time in hours. With the <b><code>calculation</b></code> input one determines the type of simulation:</p>
<ul>
<li><b> <code>first</b></code> means a fresh simulation (the default)</li>
<li>with <b> <code>restart</b></code> one can restart a previously performed simulation</li>
<li>with <b><code>combine</b></code> one can combine the results of parallel runs. This is needed when one or more of the parallel jobs has not finished so that the results are not automatically combined or when one uses a simple RCO for parallel runs (see below).</li>
<li>the <b><code>analyze</b></code> option is used to read the simulation data from the <b><code></code>.egsdat</b> file and output the results to the standard output.</li>
</ul>
<p>A <a class="el" href="classEGS__JCFControl.html">"job-control-file" (JCF) </a> RCO is used by default for parallel runs. A JCF RCO understands in addition to the above the optional input </p>
<pre class="fragment">nchunk = number of simulation chunks (default is 10)
</pre><p> In parallel runs the simulation is split into <b><code> nchunk*n_parallel</code></b> portions and each parallel job simulates one portion at a time until no histories are left. Note that a functioning file locking functionality is needed on the system in order to use a JCF-RCO. As some users have reported problems with file locking, one can force the use of a simple RCO by specifying <b><code>-s</code></b> on the command line. In this case, all parallel jobs will execute the same number of histories as specified in the input file.</p>
<h1><a class="anchor" id="common_mc"></a>
Monte Carlo transport parameter control</h1>
<p>Monte Carlo transport parameters are common to all EGSnrc applications. The input block to enter/modify transport parameters is shown below:</p>
<pre class="fragment">#  Modify here parameters that should be different from their defaults.
:start MC transport parameter:
    Global ECUT                    = 0.521          # Global electron transport cutoff
    Global PCUT                    = 0.001          # Global photon transport cutoff
    Global SMAX                    = 1e10           # Global maximum step-size restriction for e- transport
    ESTEPE                         = 0.25           # Default is 0.25
    XIMAX                          = 0.5            # Default is 0.5, max. value is 1.
    Boundary crossing algorithm    = exact          # exact (default), PRESTA-I
    Skin depth for BCA             = 3              # Default value is 3 for exact boundary crossing
    Electron-step algorithm        = PRESTA-II      # PRESTA-II (default),PRESTA-I
    Spin effects                   = On             # On (default),Off
    Brems angular sampling         = KM             # Simple,KM (default)
    Brems cross sections           = BH             # BH (default),NIST
    Pair angular sampling          = Simple         # Off, Simple (default),KM
    Triplet production             = Off            # On or Off (default)
    Electron Impact Ionization     = Off            # On, Off (default), casnati, kolbenstvedt, gryzinski
    Bound Compton scattering       = norej          # On, Off, norej (default)
    Radiative Compton corrections  = Off            # On,  Off (default)
    Rayleigh scattering            = Off            # On ,Off (default), custom
    Photoelectron angular sampling = On             # On (default),Off
    Atomic relaxations             = On             # On (default),Off
    Photon cross sections          = xcom           # si, epdl, xcom (default) or user-supplied
    Photon cross-sections output   = Off            # Off (default) or On
    Compton cross sections         = comp_xsections # user-supplied
:stop MC transport parameter:
</pre><p>Default values used in EGSnrc are set to provide an accurate simulation of the electron-photon transport, except for the exclusion of coherent (Rayleigh) scattering in low-energy photon problems. The reason for this is that until very recently users needed to especifically request the inclusion of Rayleigh cross sections in the PEGS4 data sets. Currently, Rayleigh cross sections are generated on the fly (see Rayleigh in PIRS-701). Default values may often only add time to your calculation. One can speed things up by turning them off. The user is referred to section 2.6 of the PIRS-702 manual for a detailed description of these parameters. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
